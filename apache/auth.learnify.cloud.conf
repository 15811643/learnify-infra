<VirtualHost *:443>
  ServerName auth.learnify.cloud

  SSLEngine on
  SSLCertificateFile /etc/letsencrypt/live/auth.learnify.cloud/fullchain.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/auth.learnify.cloud/privkey.pem

  # Forward client/HTTPS info to Authelia so it builds https URLs
  ProxyPreserveHost On
  RequestHeader set X-Forwarded-Proto "https"
  RequestHeader set X-Forwarded-Port "443"
  RequestHeader set X-Forwarded-Host "auth.learnify.cloud"

  ProxyPass        / http://127.0.0.1:9091/
  ProxyPassReverse / http://127.0.0.1:9091/

  ErrorLog ${APACHE_LOG_DIR}/auth.learnify-error.log
  CustomLog ${APACHE_LOG_DIR}/auth.learnify-access.log combined
</VirtualHost>

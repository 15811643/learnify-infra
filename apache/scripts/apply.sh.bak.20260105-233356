#!/usr/bin/env bash
set -euo pipefail

SRC=/opt/learnify/infra/apache/sites-available
DST=/etc/apache2/sites-available

install -m 0644 -o root -g root "$SRC/app.learnify.cloud.conf"        "$DST/app.learnify.cloud.conf"
install -m 0644 -o root -g root "$SRC/app.learnify.cloud-le-ssl.conf" "$DST/app.learnify.cloud-le-ssl.conf"

# Enforce enabled sites via symlinks only
a2ensite -q app.learnify.cloud.conf app.learnify.cloud-le-ssl.conf >/dev/null || true

apachectl -t
systemctl reload apache2
